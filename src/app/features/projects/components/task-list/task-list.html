<div class="space-y-4">
  <!-- ADD TASK -->
  <div class="flex gap-2">
    <input
      type="text"
      placeholder="Nouvelle tâche"
      [(ngModel)]="newTaskTitle"
      class="flex-1 border rounded-lg p-2 focus:ring-2 focus:ring-blue-400 outline-none"
    />

    <select [(ngModel)]="newTaskPriority" class="border rounded-lg p-2">
      <option>Haute</option>
      <option>Moyenne</option>
      <option>Basse</option>
    </select>

    <button (click)="addTask()" class="bg-green-500 text-white px-3 rounded-lg hover:bg-green-600">
      +
    </button>
  </div>

  <!-- TASK LIST -->

  @for (task of tasks; track task.title; let i = $index) {
    <div
      class="border-l-4 pl-4 py-2 bg-gray-50 rounded-lg flex justify-between items-center"
      [ngClass]="getStatusColor(task.status)"
    >
      <div>
        <h4 class="font-semibold">{{ task.title }}</h4>
        <p class="text-sm text-gray-500">Priorité: {{ task.priority }} | {{ task.status }}</p>
      </div>

      <button
        (click)="openDeleteModal(i)"
        class="text-red-500 hover:text-red-700 text-sm font-semibold"
      >
        Supprimer
      </button>
    </div>
  }

  @if (taskToDeleteIndex !== null) {

    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">

      <div class="bg-white rounded-xl p-6 w-80 space-y-4 shadow-xl animate-fade-in">

        <h2 class="text-lg font-semibold text-gray-800">
          Confirmer la suppression
        </h2>

        <p class="text-gray-600 text-sm">
          Voulez-vous vraiment supprimer cette tâche ?
        </p>

        <div class="flex justify-end gap-3">

          <button
            (click)="cancelDelete()"
            class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition"
          >
            Annuler
          </button>

          <button
            (click)="confirmDelete()"
            class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition"
          >
            Supprimer
          </button>

        </div>

      </div>

    </div>

  }
</div>
